<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!--Import Google Icon Font-->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Viz Asgnm 3</title>
  <link href="./app.b471f207f0e8933fa817fa06958c5546.css" rel="stylesheet"></head>
  <body>
    <div class="navbar-fixed">
      <nav>
        <div class="nav-wrapper">
          <a class="brand-logo">NYC Crime Data</a>
          <ul class="right hide-on-med-and-down">
            <li><label><input type="checkbox" class="filled-in" id="filterUnknownCheckbox"/><span>Filter Unknowns</span></label></li>
          </ul>
          <ul class="right hide-on-med-and-down">
            <li><label><input type="checkbox" class="filled-in" id="setElasticY" checked="checked"/><span>Use Elastic Y</span></label></li>
          </ul>
        </div>
      </nav>
    </div>
    <div id="root">
        <div id="progressModal" class="modal">
            <div class="modal-content">
                <h3>Loading Data</h3>
                <div class="progress">
                    <div class="indeterminate"></div>
                </div>
            </div>
        </div>
        <div class="row">
          <div class="col s12 l4">
            <div class="card card-explanation">
              <div class="card-content">
                <span class="card-title">NYC Crime Data</span>
              </div>
              <div class="card-tabs">
                  <ul class="tabs tabs-fixed-width"  id="writingTabs">
                    <li class="tab"><a class="active" href="#instructions">Instructions</a></li>
                    <li class="tab"><a  href="#writeup">Write Up</a></li>
                  </ul>
              </div>
              <div class="card-content">
                <div id="instructions">
                  <p>
                    This project uses data from the <a
                    href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Historic/qgea-i56i">NYPD
                    Complaint Data Historic</a> data set. The original dataset
                    consists of 6 million rows so this site uses a uniform
                    random sample of 100,000 rows to minimize loading time.
                  </p>
                  <p>
                    The graphs in this project are all interactive and can be
                    used to filter other graphs on the page. For example, if
                    you click on a borough in the map, the bar charts on this
                    page will transform to display only crimes which occurred
                    in that borough. If you click the borough again the filter
                    will go away. You can click multiple boroughs at the same
                    time to display crimes which occurred in those boroughs.
                  </p>
                  <p>
                    The Sankey diagram can be used to display the flows between
                    up to four dimensions. Try pressing Filter Unknowns in the
                    top right. You can see the Sankey diagram update and remove
                    unknowns. Try dragging the grey labels to the yellow
                    labels, or dragging the yellow labels around. Also try
                    clicking on the nodes in the Sankey diagram.
                  </p>
                  <p>
                    The technologies used for creating the charts are a mix of
                    <a href="https://github.com/dc-js/dc.js">dc.js</a>, <a
                    href="https://github.com/crossfilter/crossfilter">crossfilter</a>,
                    and <a href="https://github.com/d3/d3">d3</a>.
                  </p>
                </div>
                <div id="writeup">
                  <p>
                    My initial design goal was to create a brushing and
                    filtering dashboard which allows users to select subsets
                    of the dataset by clicking on charts and hopefully find
                    correlations in the underlying dataset. I ended up
                    finding the really nice library <a
                    href="https://github.com/dc-js/dc.js">dc.js</a> which
                    makes these charts simple to create.
                  </p>
                  <p>
                    After putting together a dashboard of bar charts, maps,
                    etc. I thought filtering was working well but I wanted to
                    put victim and race dimensions into a single chart. I
                    started thinking about how I could visualize flows
                    between Victim Age and Suspect Age and decided that a
                    Sankey diagram would be a decent way to visualize these
                    flows.
                  </p>
                  <p>
                    Then it crossed my mind that these flows could be
                    visualized for any two dimensions and potentially
                    multiple dimensions. I decided I wanted to make an
                    interactive Sankey diagram where the columns in the
                    Sankey diagram represent the dimensions in the data. I
                    also wanted users to be able to change the order of the
                    dimensions and highlight queries to do and queries across
                    dimensions and or queries within dimensions.
                  </p>
                  <p>
                    The end result is an interactive Sankey diagram
                    integrated into dc.js dashboard.
                  </p>
                  <p>
                    The development process consisted of three stages. The
                    first stage was getting anything to show up which ended
                    when I had a dc.js dashboard of pie charts and bar
                    charts. The second stage was building the Sankey Chart
                    which involved learning d3 and manipulating the dataset
                    to support d3-sankey's unique data structure. The last
                    stage was making everything look pretty. Overall it 
                    took a couple days to put everything together.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="col s12 l8">
            <div class="card card-boroughMap z-depth-0">
              <div class="card-content">
                <span class="card-title">Boroughs</span>
                <div class="chart boroughMap" id="boroughMap"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12">
            <div class="card card-Sankey z-depth-0">
              <div class="card-content">
                <span class="card-title">Sankey</span>
                <div class="dragRow" id="inactiveDimensions">
                </div>
                <div class="dragRow" id="activeDimensions">
                </div>
                <div class="chart sankeyChart" id="customSankeyChart"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12 l4">
            <div class="card card-barchart z-depth-0">
              <div class="card-content">
                <span class="card-title">suspect race</span>
                <div class="chart barchart" id="suspectRace"></div>
              </div>
            </div>
          </div>
          <div class="col s12 l4">
            <div class="card card-barchart z-depth-0">
              <div class="card-content">
                <span class="card-title">suspect age</span>
                <div class="chart barchart" id="suspectAge"></div>
              </div>
            </div>
          </div>
          <div class="col s12 l4">
            <div class="card card-barchart z-depth-0">
              <div class="card-content">
                <span class="card-title">suspect sex</span>
                <div class="chart barchart" id="suspectSex"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12 l4">
            <div class="card card-barchart z-depth-0">
              <div class="card-content">
                <span class="card-title">victim race</span>
                <div class="chart barchart" id="victimRace"></div>
              </div>
            </div>
          </div>
          <div class="col s12 l4">
            <div class="card card-barchart z-depth-0">
              <div class="card-content">
                <span class="card-title">victim age</span>
                <div class="chart barchart" id="victimAge"></div>
              </div>
            </div>
          </div>
          <div class="col s12 l4">
            <div class="card card-barchart z-depth-0">
              <div class="card-content">
                <span class="card-title">victim sex</span>
                <div class="chart barchart" id="victimSex"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s12 l6">
            <div class="card card-barchart z-depth-0">
              <div class="card-content">
                <span class="card-title">Crime Category</span>
                <div class="chart barchart" id="crimeCategory"></div>
              </div>
            </div>
          </div>
          <div class="col s12 l6">
            <div class="card card-barchart z-depth-0">
              <div class="card-content">
                <span class="card-title">Crime Attempted vs Completed</span>
                <div class="chart barchart" id="crimeCompleted"></div>
              </div>
            </div>
          </div>
        </div> 
        <div class="row">
          <div class="col s12">
            <div class="card card-timeline z-depth-0">
              <div class="card-content">
                <span class="card-title">Crime Timeline</span>
                <div class="chart timeline" id="crimeTimeline"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  <script type="text/javascript" src="./vendor.879f1447401309382168.js"></script><script type="text/javascript" src="./app.879f1447401309382168.js"></script></body>
</html>
